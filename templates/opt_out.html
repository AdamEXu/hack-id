<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Data Deletion Request - Hack ID</title>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 20px;
                background-color: #f5f5f5;
                color: #333;
            }
            .container {
                max-width: 600px;
                margin: 0 auto;
                background: white;
                padding: 30px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            h1 {
                color: #d32f2f;
                margin-bottom: 20px;
                font-size: 24px;
            }
            .warning {
                background: #fff3cd;
                border: 1px solid #ffeaa7;
                border-radius: 4px;
                padding: 15px;
                margin: 20px 0;
            }
            .error {
                background: #f8d7da;
                border: 1px solid #f5c6cb;
                border-radius: 4px;
                padding: 15px;
                margin: 20px 0;
                color: #721c24;
            }
            .deletion-list {
                background: #f8f9fa;
                border-radius: 4px;
                padding: 15px;
                margin: 15px 0;
            }
            .deletion-list ul {
                margin: 10px 0;
                padding-left: 20px;
            }
            .deletion-list li {
                margin: 5px 0;
            }
            .form-group {
                margin: 20px 0;
            }
            .checkbox-group {
                display: flex;
                align-items: flex-start;
                gap: 10px;
                margin: 15px 0;
            }
            .checkbox-group input[type="checkbox"] {
                margin-top: 4px;
            }
            .checkbox-group label {
                flex: 1;
                font-size: 14px;
            }
            .btn {
                background: #d32f2f;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 16px;
                margin: 10px 5px 10px 0;
            }
            .btn:hover {
                background: #b71c1c;
            }
            .btn-secondary {
                background: #6c757d;
            }
            .btn-secondary:hover {
                background: #5a6268;
            }
            .user-info {
                background: #e3f2fd;
                border-radius: 4px;
                padding: 15px;
                margin: 15px 0;
            }
            .discord-warning {
                background: #e8f5e8;
                border: 1px solid #c3e6c3;
                border-radius: 4px;
                padding: 15px;
                margin: 15px 0;
            }
        </style>
    </head>
    <body>
        <div class="container">
            {% if error %}
                <div class="error">
                    <strong>Error:</strong> {{ error }}
                </div>
                <p><a href="/">Return to homepage</a></p>
            {% else %}
                <h1>üóëÔ∏è Delete My Data</h1>
                
                {% if user_email %}
                    <div class="user-info">
                        <strong>Account:</strong> {{ user_email }}
                    </div>
                {% endif %}

                {% if preview %}
                    <div class="warning">
                        <strong>‚ö†Ô∏è Warning:</strong> This action cannot be undone. All of your data will be permanently deleted from our systems.
                    </div>

                    <h3>What will be deleted:</h3>
                    <div class="deletion-list">
                        <ul>
                            {% for item in preview.items_to_delete %}
                                <li>{{ item }}</li>
                            {% endfor %}
                        </ul>
                    </div>

                    {% if preview.discord_warning %}
                        <div class="discord-warning">
                            <strong>ü§ñ Discord Notice:</strong> You will lose your verification status and any event-specific roles in our Discord server. You'll need to re-verify if you want to participate in future events.
                        </div>
                    {% endif %}

                    <h3>Important Information:</h3>
                    <ul>
                        <li><strong>Immediate Effect:</strong> Your data will be deleted immediately and cannot be recovered</li>
                        <li><strong>Event Access:</strong> You will lose access to any current or future events you're registered for</li>
                        <li><strong>Discord Roles:</strong> Any verification roles will be removed from Discord</li>
                        <li><strong>Re-registration:</strong> If you want to participate in future events, you'll need to create a new account</li>
                        <li><strong>Email Lists:</strong> You will be removed from all email communications</li>
                    </ul>

                    <form method="post">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="confirm_deletion" name="confirm_deletion" value="yes" required>
                                <label for="confirm_deletion">
                                    <strong>I understand that this action is permanent and cannot be undone.</strong> 
                                    I want to permanently delete all of my data from Hack ID systems.
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn">
                                üóëÔ∏è Delete All My Data
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="window.close()">
                                Cancel
                            </button>
                        </div>
                    </form>

                    <hr style="margin: 30px 0;">
                    <p style="font-size: 14px; color: #666;">
                        <strong>Questions?</strong> If you have concerns about your data or need help, 
                        please contact us before proceeding with deletion.
                    </p>
                {% endif %}
            {% endif %}
        </div>
    </body>
</html>
