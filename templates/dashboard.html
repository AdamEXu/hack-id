<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>hack.sv ID</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                    Roboto, sans-serif;
                background: #f8f9fa;
                padding: 20px;
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
            }

            .header {
                background: white;
                padding: 20px;
                border-radius: 8px;
                margin-bottom: 20px;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .header h1 {
                color: #333;
                margin: 0;
            }

            .header-actions {
                display: flex;
                gap: 10px;
            }

            .btn {
                padding: 8px 16px;
                border: none;
                border-radius: 6px;
                text-decoration: none;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.2s;
                display: inline-flex;
                align-items: center;
                gap: 6px;
            }

            .btn-primary {
                background: #007bff;
                color: white;
            }

            .btn-primary:hover {
                background: #0056b3;
                text-decoration: none;
                color: white;
            }

            .btn-secondary {
                background: #6c757d;
                color: white;
            }

            .btn-secondary:hover {
                background: #545b62;
                text-decoration: none;
                color: white;
            }

            .btn-danger {
                background: #dc3545;
                color: white;
            }

            .btn-danger:hover {
                background: #c82333;
                text-decoration: none;
                color: white;
            }

            .content {
                background: white;
                padding: 30px;
                border-radius: 8px;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                text-align: center;
            }

            .content h2 {
                color: #333;
                margin-bottom: 10px;
            }

            .content p {
                color: #666;
                line-height: 1.6;
            }

            .icon {
                width: 16px;
                height: 16px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>hack.sv ID</h1>
                <div class="header-actions">
                    {% if is_admin %}
                    <a href="/admin" class="btn btn-primary">
                        <img
                            src="/static/icons/gear.svg"
                            class="icon"
                            alt="Admin"
                        />
                        Admin Panel
                    </a>
                    {% endif %}
                    <a href="/logout" class="btn btn-secondary">Logout</a>
                </div>
            </div>

            <div class="content">
                {% if dashboard and dashboard.user %}
                <h2>{{ dashboard.user.display_name }}'s Dashboard</h2>
                <p>
                    {{ dashboard.user.pronouns if dashboard.user.pronouns !=
                    'other' else '' }}
                </p>
                {% else %}
                <h2>Welcome to hack.sv ID</h2>
                {% endif %} {% if is_admin %}
                <div class="admin-notice">
                    <strong>Admin Access:</strong> You have administrative
                    privileges.
                </div>
                {% endif %} {% if dashboard %}
                <!-- User Profile Section -->
                <div class="profile-section">
                    <h3>Profile Information</h3>
                    <div class="profile-info">
                        <div class="info-item">
                            <strong>Email:</strong> {{ dashboard.user.email }}
                        </div>
                        <div class="info-item">
                            <strong>Legal Name:</strong> {{
                            dashboard.user.legal_name }}
                        </div>
                        {% if dashboard.user.preferred_name %}
                        <div class="info-item">
                            <strong>Preferred Name:</strong> {{
                            dashboard.user.preferred_name }}
                        </div>
                        {% endif %}
                        <div class="info-item">
                            <strong>Pronouns:</strong>
                            {% if dashboard.user.pronouns == 'other' %} Other
                            (we'll use {{ dashboard.user.preferred_name or
                            dashboard.user.legal_name }}) {% else %} {{
                            dashboard.user.pronouns }} {% endif %}
                        </div>
                        <div class="info-item">
                            <strong>Date of Birth:</strong> {{
                            dashboard.user.dob }}
                        </div>
                    </div>
                </div>

                <!-- Discord Section -->
                <div class="discord-section">
                    <h3>Discord Integration</h3>
                    {% if dashboard.discord.linked %}
                    <div class="discord-info">
                        <div class="discord-status">
                            ✅ Discord Account Linked
                        </div>
                        {% if dashboard.discord.username %}
                        <div class="discord-details">
                            <strong>Username:</strong> {{
                            dashboard.discord.username }} {% if
                            dashboard.discord.discriminator and
                            dashboard.discord.discriminator != '0' %} #{{
                            dashboard.discord.discriminator }} {% endif %}
                        </div>
                        {% if dashboard.discord.display_name and
                        dashboard.discord.display_name !=
                        dashboard.discord.username %}
                        <div class="discord-details">
                            <strong>Display Name:</strong> {{
                            dashboard.discord.display_name }}
                        </div>
                        {% endif %} {% elif dashboard.discord.error %}
                        <div class="discord-error">
                            ⚠️ {{ dashboard.discord.error }}
                        </div>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="discord-info">
                        <div class="discord-status">
                            ❌ No Discord Account Linked
                        </div>
                        <p>
                            Link your Discord account to get verification roles
                            for events.
                        </p>
                    </div>
                    {% endif %}
                </div>

                <!-- Events Section -->
                <div class="events-section">
                    <h3>Your Events</h3>
                    {% if dashboard.enrolled_events %}
                    <div class="enrolled-events">
                        <h4>Enrolled Events</h4>
                        <div class="events-list">
                            {% for event in dashboard.enrolled_events %}
                            <div class="event-item">
                                <div class="event-name">{{ event.name }}</div>
                                <div class="event-description">
                                    {{ event.description }}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %} {% if dashboard.event_registrations %}
                    <div class="event-registrations">
                        <h4>Event Registrations</h4>
                        <div class="registrations-list">
                            {% for reg in dashboard.event_registrations %}
                            <div class="registration-item">
                                <div class="registration-event">
                                    {{ reg.event_name }}
                                </div>
                                <div class="registration-date">
                                    Registered: {{ reg.registered_at }}
                                </div>
                                <div class="registration-expires">
                                    Expires: {{ reg.expires_at }}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %} {% if not dashboard.enrolled_events and not
                    dashboard.event_registrations %}
                    <div class="no-events">
                        <p>You're not enrolled in any events yet.</p>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <div
                    style="
                        margin-top: 30px;
                        padding-top: 20px;
                        border-top: 1px solid #eee;
                    "
                >
                    <h3
                        style="
                            color: #666;
                            font-size: 16px;
                            margin-bottom: 15px;
                        "
                    >
                        Privacy Options
                    </h3>
                    <p
                        style="
                            font-size: 14px;
                            color: #666;
                            margin-bottom: 15px;
                        "
                    >
                        You have full control over your data. If you no longer
                        want to participate in hack.sv events, you can
                        permanently delete all of your information from our
                        systems.
                    </p>
                    <a href="/opt-out-self" class="btn btn-danger">
                        🗑️ Delete My Data
                    </a>
                </div>
            </div>
        </div>
    </body>
</html>
